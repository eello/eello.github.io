<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SAM Deploy Error - BasePathMapping Create Failed</title>
    <link rel="stylesheet" href="../styles/main.css">
    <!-- Highlight.js Themes -->
    <link rel="stylesheet" id="hljs-theme-light"
        href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-light.min.css" disabled>
    <link rel="stylesheet" id="hljs-theme-dark"
        href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css" disabled>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script
        src="https://cdnjs.cloudflare.com/ajax/libs/highlightjs-line-numbers.js/2.8.0/highlightjs-line-numbers.min.js"></script>
    <script>
        // Theme initialization
        const savedTheme = localStorage.getItem('theme') || (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
        document.documentElement.setAttribute('data-theme', savedTheme);

        // Load initial hljs theme
        document.addEventListener('DOMContentLoaded', () => {
            const isDark = document.documentElement.getAttribute('data-theme') === 'dark';
            document.getElementById(isDark ? 'hljs-theme-dark' : 'hljs-theme-light').removeAttribute('disabled');
            hljs.highlightAll();
            hljs.initLineNumbersOnLoad({ singleLine: true });
        });
    </script>
</head>

<body>
    <header class="mobile-header">
        <div class="mobile-logo">My Blog</div>
        <button id="menu-toggle" class="menu-toggle">â˜°</button>
    </header>

    <!-- ì™¼ìª½ ì‚¬ì´ë“œë°”: ì¹´í…Œê³ ë¦¬ ë° í¬ìŠ¤íŠ¸ ëª©ë¡ -->
    <aside id="sidebar" class="sidebar">
        <h2 class="sidebar-title"><a href="../" class="sidebar-home-link">eello</a></h2>
        <nav class="category-list">
                <div class="category-item depth-1">
                    <div class="category-name">Project</div>
                    <ul class="post-list"></ul>
                    
                <div class="category-item depth-2">
                    <div class="category-name">SPH</div>
                    <ul class="post-list">
                <li class="post-item">
                    <a href="../sam-deploy-error---classnotfoundexception/" class="post-link ">SAM Deploy Error - ClassNotFoundException</a>
                </li>
            </ul>
                    
                </div>
            
                </div>
            
                <div class="category-item depth-1">
                    <div class="category-name">ê°œë°œ</div>
                    <ul class="post-list"></ul>
                    
                <div class="category-item depth-2">
                    <div class="category-name">tech</div>
                    <ul class="post-list">
                <li class="post-item">
                    <a href="../ì¿ íŒ¡-ìœ ì¶œ/" class="post-link ">ì¿ íŒ¡ ìœ ì¶œ</a>
                </li>
            </ul>
                    
                <div class="category-item depth-3">
                    <div class="category-name">test</div>
                    <ul class="post-list">
                <li class="post-item">
                    <a href="../ë””ìì¸-í…ŒìŠ¤íŠ¸/" class="post-link ">design test</a>
                </li>
            </ul>
                    
                </div>
            
                </div>
            
                <div class="category-item depth-2">
                    <div class="category-name">spring</div>
                    <ul class="post-list">
                <li class="post-item">
                    <a href="../@transactional-ì´í•´í•˜ê¸°/" class="post-link ">@Transactional ì´í•´í•˜ê¸°</a>
                </li>
            </ul>
                    
                </div>
            
                </div>
            
                <div class="category-item depth-1">
                    <div class="category-name">Uncategorized</div>
                    <ul class="post-list">
                <li class="post-item">
                    <a href="../sam-deploy-error---basepathmapping-create-failed/" class="post-link active">SAM Deploy Error - BasePathMapping Create Failed</a>
                </li>
            </ul>
                    
                </div>
            </nav>

        <div class="theme-toggle-container">
            <button id="theme-toggle" class="theme-toggle-btn">
                <span class="icon">ğŸŒ“</span>
                <span class="text">Switch to Dark Mode</span>
            </button>
        </div>
    </aside>

    <!-- ì¤‘ì•™ ë³¸ë¬¸ ì˜ì—­ -->
    <main class="main-wrapper">
        <div class="content-container">
            <article class="article-content">
                <header class="article-header">
                    <h1 class="article-title">SAM Deploy Error - BasePathMapping Create Failed</h1>
                    <div class="article-meta">
                        <div>Published on 2025-12-01 11:07:45</div>
                        <div>Category: Uncategorized</div>
                    </div>
                </header>

                <section class="body">
                    <h2 id="ë¬¸ì œ">ë¬¸ì œ</h2>
<p>SAM í”„ë¡œì íŠ¸(Lambda + API Gateway) ë°°í¬ ì¤‘(sam deploy) BasePathMappingì„ ìƒì„±í•˜ëŠ” ê³¼ì •ì—ì„œ ë‹¤ìŒê³¼ ê°™ì€ ì—ëŸ¬ ë°œìƒ</p>
<div class="code-block-wrapper">
    <div class="code-block-header">
        <span class="code-lang">text</span>
        <span class="code-copy">Copy</span>
    </div>
    <pre class="code-block language-"><code class="code-inner">CREATE_FAILED  AWS::ApiGateway::BasePathMapping  BasePathMapping
	Resource handler returned message: &quot;Invalid stage identifier specified
	(Service: ApiGateway, Status Code: 400, Request ID:0d3bc942-51ac-425d-a7cc-8e37a545bf19) (SDK Attempt Count: 1)&quot;
	(RequestToken: c546a874-68e4-0d70-64d2-cd1bc5584e91, HandlerErrorCode:InvalidRequest)
</code></pre>
</div>
<p>ê´€ë ¨ <code>template.yaml</code> ì„¤ì •</p>
<div class="code-block-wrapper">
    <div class="code-block-header">
        <span class="code-lang">yaml</span>
        <span class="code-copy">Copy</span>
    </div>
    <pre class="code-block language-yaml"><code class="code-inner">SphApi:  
  Type: AWS::Serverless::Api  
  Properties:  
    StageName: !Ref ApiStageName  
    # ... 
  
BasePathMapping:  
  Type: AWS::ApiGateway::BasePathMapping  
  Properties:  
    DomainName: !Ref DeployDomainName  
    RestApiId: !Ref SphApi  
    Stage: !Ref ApiStageName
</code></pre>
</div>
<h2 id="ì›ì¸">ì›ì¸</h2>
<p><img src="images/Pasted%20image%2020251201112502.webp" alt=""></p>
<ul>
<li>BasePathMapping ìƒì„±ì€ ì½˜ì†” ë°°í¬ ê³¼ì •ìœ¼ë¡œ ë´¤ì„ ë•Œ API Gatewayì—ì„œ <code>ì‚¬ìš©ì ì§€ì • ë„ë©”ì¸ ì´ë¦„ &gt; API ë§¤í•‘ êµ¬ì„±</code>ì— í•´ë‹¹í•˜ëŠ” ë¶€ë¶„</li>
<li>API ë§¤í•‘ êµ¬ì„± ë‹¨ê³„ì—ì„œ ë§¤í•‘ì„ ì¶”ê°€í•˜ê¸° ìœ„í•´ ë°°í¬ëœ ìŠ¤í…Œì´ì§€ë¥¼ ì„ íƒí•´ì•¼í•˜ëŠ”ë° <strong>ìŠ¤í…Œì´ì§€ê°€ ìƒì„±ë˜ê¸° ì „ì— ë§¤í•‘ ìƒì„±ì„ ì‹œë„í•´ ìŠ¤í…Œì´ì§€ë¥¼ ì„ íƒí•  ìˆ˜ ì—†ì–´ ë°œìƒ</strong></li>
</ul>
<p>ì—¬ëŸ¬ LLMì„ í†µí•´ í•´ë‹¹ ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆëŠ” ì›ì¸ìœ¼ë¡œëŠ” í¬ê²Œ 2ê°€ì§€ ì˜€ë‹¤.</p>
<ol>
<li>íŒŒë¼ë¯¸í„°ë¡œ ì£¼ì–´ì§„ ApiStageNameì˜ ì‹¤ì œ ê°’ì´ ë¹ˆ ë¬¸ìì—´ì¸ ê²½ìš°</li>
<li>ìŠ¤í…Œì´ì§€ê°€ ìƒì„±ì´ ì™„ë£Œë˜ê¸° ì „ì— BasePathMappingì˜ ìƒì„± ì‹œë„ë¡œ ìŠ¤í…Œì´ì§€ë¥¼ ì„ íƒí•  ìˆ˜ ì—†ëŠ” ê²½ìš°</li>
</ol>
<p>1ë²ˆ ë¬¸ì œëŠ” ë°°í¬ ì‹¤í–‰ ì‹œì— ë¡œê·¸ë¥¼ í†µí•´ ì…ë ¥ëœ ì˜¤ë²„ë¼ì´ë“œëœ íŒŒë¼ë¯¸í„° ê°’ë“¤ì„ ì¶œë ¥í•˜ê¸° ë•Œë¬¸ì— ì•„ë‹˜ì„ ì•Œ ìˆ˜ ìˆì—ˆì§€ë§Œ í˜¹ì‹œë‚˜ í•´ì„œ StageNameì„ íŒŒë¼ë¯¸í„° ê°’ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ â€œdevâ€ ê°’ìœ¼ë¡œ í•˜ë“œì½”ë”©í•´ ë°°í¬í•´ë³´ì•˜ì§€ë§Œ ê°™ì€ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆë‹¤.</p>
<p>2ë²ˆ ë¬¸ì œì¸ì§€ í™•ì¸í•˜ê¸° ìœ„í•´ BasePathMappingì˜ ì†ì„± ê°’ì— StageëŠ” í•„ìˆ˜ ê°’ì´ ì•„ë‹ˆê¸° ë•Œë¬¸ì— Stageë¥¼ ì œê±°í•´ ì—°ê²°ì€ í•˜ë˜ ìŠ¤í…Œì´ì§€ë¥¼ ì„ íƒí•˜ì§€ ì•Šë„ë¡ ë°°í¬ë¥¼ ì‹œë„í–ˆê³  ê²°ê³¼ëŠ” ë°°í¬ì— ì„±ê³µí–ˆê³  ì½˜ì†”ì—ì„œ í™•ì¸í–ˆì„ ë•Œ ë§¤í•‘ì€ ìƒì„±ë˜ì—ˆì§€ë§Œ ìŠ¤í…Œì´ì§€ê°€ ì„ íƒë˜ì§€ ì•Šì€ ìƒíƒœë¡œ ë‚¨ì•„ìˆì—ˆë‹¤. ê²°êµ­ ë¬¸ì œì˜ ì›ì¸ì€ 2ë²ˆì¸ ê²ƒì´ë‹¤.</p>
<h2 id="ì‹œë„">ì‹œë„</h2>
<p>ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œëŠ” ApiGatewayì˜ ìŠ¤í…Œì´ì§€ê°€ ìƒì„±ëœ í›„ BasePathMapping ìƒì„± ì‹œë„ë¥¼ ë³´ì¥í•´ì•¼ í•œë‹¤.</p>
<h3 id="1-templateyaml-íŒŒì¼ì„-ë¶„í• í•´-basepathmappingì„-ë³„ë„ì˜-ìŠ¤íƒìœ¼ë¡œ-ë°°í¬">1. template.yaml íŒŒì¼ì„ ë¶„í• í•´ BasePathMappingì„ ë³„ë„ì˜ ìŠ¤íƒìœ¼ë¡œ ë°°í¬</h3>
<p>template.yaml íŒŒì¼ì„ template-api.yaml, template-domain.yamlë¡œ ë¶„í• í•´ ê°ê°ì˜ ìŠ¤íƒìœ¼ë¡œ ë”°ë¡œ ë°°í¬í•œë‹¤.</p>
<ol>
<li>template-api.yamlì„ ì‚¬ìš©í•´ Lambda, Api Gateway ë¦¬ì†ŒìŠ¤ ìƒì„± ë°°í¬</li>
<li>template-domain.yamlì„ ì‚¬ìš©í•´ Api Gatewayì— BasePathMapping ìƒì„± ë°°í¬</li>
</ol>
<blockquote>
<p>ë°°í¬ config íŒŒì¼ ë˜í•œ samconfig-api.toml, samconfig-domain.tomlë¡œ ë¶„í•  í›„ default.global.parametersì— template_fileì„ ê°ê°ì˜ template íŒŒì¼ë¡œ ì„¤ì •</p>
</blockquote>
<p>ë°°í¬ ê²°ê³¼ëŠ” <strong>ì„±ê³µ</strong></p>
<p>Lambda, Api Gateway ê·¸ë¦¬ê³  ë§Œë“¤ì–´ì§„ ìŠ¤í…Œì´ì§€ì™€ ë„ë©”ì¸ ë§¤í•‘ì´ ê¸°ëŒ€í•œ ê²°ê³¼ë¡œ ìƒì„±ë¨
í•˜ì§€ë§Œ, API ìš”ì²­ì„ ì‹œë„í–ˆì„ ë•Œ 502 Bad Gatewayìœ¼ë¡œ Internal Server Error ì‘ë‹µ
CloudWatch ë¡œê·¸ë¥¼ í™•ì¸í•´ë³´ë©´ Lambda í•¨ìˆ˜ ë‚´ì—ì„œ í•¸ë“¤ëŸ¬ í´ë˜ìŠ¤ë¥¼ ì°¾ì„ ìˆ˜ ì—†ì–´ <code>java.lang.ClassNotFoundException</code> ì˜ˆì™¸ ë°œìƒ</p>
<p>ë°°í¬ ìì²´ëŠ” ì„±ê³µí•˜ì§€ë§Œ ì‹¤ì œ APIê°€ ë™ì‘í•˜ì§€ ì•ŠìŒ</p>
<h3 id="2-dependson-ìœ¼ë¡œ-ìˆœì„œ-ê°•ì œ">2. DependsOn ìœ¼ë¡œ ìˆœì„œ ê°•ì œ</h3>
<p>template.yamlì— DependsOn ì†ì„±ìœ¼ë¡œ í•´ë‹¹ ë¦¬ì†ŒìŠ¤ë¥¼ ìƒì„±í•˜ê¸° ì „ì— ë¨¼ì € ìƒì„±ë˜ì–´ì•¼ í•  ë¦¬ì†ŒìŠ¤ë¥¼ ì§€ì •í•  ìˆ˜ ìˆë‹¤.
ê¸°ëŒ€í•˜ëŠ” ë™ì‘ì€ BasePathMappingì˜ DependsOnì— Stageë¥¼ ì„¤ì •í•´ Stageê°€ ë¨¼ì € ìƒì„±ëœ í›„ BasePathMappingì´ ìƒì„±ë˜ëŠ” ê²ƒì´ë‹¤.</p>
<p>API GatewayëŠ” í˜„ì¬ ë¦¬ì†ŒìŠ¤ íƒ€ì…ì´ AWS::Serverless::Apiìœ¼ë¡œ í•´ë‹¹ íƒ€ì…ì— ëŒ€í•´ì„œ SAMì€ Stage ì´ë¦„ ê·œì¹™ìœ¼ë¡œ ìŠ¤í…Œì´ì§€ë¥¼ ìƒì„±í•˜ê²Œ ëœë‹¤. ì´ë ‡ê²Œ ìƒì„±ë˜ëŠ” ìŠ¤í…Œì´ì§€ë¥¼ BasePathMappingì˜ DependsOnìœ¼ë¡œ ì„¤ì •í•´ ìŠ¤í…Œì´ì§€ê°€ ë¨¼ì € ìƒì„±ë˜ë„ë¡ í•œë‹¤.</p>
<blockquote>
<p>SAMì˜ ìë™ ìƒì„± íŒ¨í„´ - Stage ì´ë¦„ ê·œì¹™
<code>{ApiLogicalId}{StageName}Stage</code>
ì˜ˆë¥¼ë“¤ì–´, ë¦¬ì†ŒìŠ¤ì— ì •ì˜ëœ Api ì´ë¦„ì´ SphApi ì´ê³  ìŠ¤í…Œì´ì§€ ì´ë¦„ì´ prod ì¸ ê²½ìš° â†’ SphApiProdStage</p>
</blockquote>
<p>ë¨¼ì € í•´ë‹¹ ë°©ì‹ìœ¼ë¡œ ì ìš©í–ˆì„ ë•Œ ë°°í¬ê°€ ë˜ëŠ”ì§€ í™•ì¸í•´ë³´ë©´</p>
<div class="code-block-wrapper">
    <div class="code-block-header">
        <span class="code-lang">yaml</span>
        <span class="code-copy">Copy</span>
    </div>
    <pre class="code-block language-yaml"><code class="code-inner">SphApi:  
	Type: AWS::Serverless::Api  
	Properties:  
		StageName: dev
  
BasePathMapping:  
	Type: AWS::ApiGateway::BasePathMapping  
	DependsOn:  
		- SphApiDevStage  
	Properties:  
		DomainName: !Ref DeployDomainName  
		RestApiId: !Ref SphApi  
		Stage: dev
</code></pre>
</div>
<p>ë¦¬ì†ŒìŠ¤ë¥¼ ìƒì„±í•˜ê¸°ë„ ì „ì— ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤.</p>
<div class="code-block-wrapper">
    <div class="code-block-header">
        <span class="code-lang">text</span>
        <span class="code-copy">Copy</span>
    </div>
    <pre class="code-block language-"><code class="code-inner">Error: ... Reason: Template format error: Unresolved resource dependencies [SphApiDevStage] in the Resources block of the template
</code></pre>
</div>
<p>DependsOnì€ í…œí”Œë¦¿ ë‚´ì— ì •ì˜ëœ ë¦¬ì†ŒìŠ¤ë§Œ ì°¸ì¡°í•  ìˆ˜ ìˆëŠ”ë°, SAMì´ ìë™ìƒì„±í•˜ëŠ” ìŠ¤í…Œì´ì§€ ì´ë¦„ì€ ë³€í™˜ ê³¼ì •ì—ì„œ ìƒì„±ë˜ë¯€ë¡œ ì›ë³¸ í…œí”Œë¦¿ì—ì„œ ì°¸ì¡° ë¶ˆê°€ëŠ¥í•´ template.yamlì— Stageë¥¼ ëª…ì‹œì ìœ¼ë¡œ ì •ì˜í•´ì•¼ í•œë‹¤.</p>
<div class="code-block-wrapper">
    <div class="code-block-header">
        <span class="code-lang">yaml</span>
        <span class="code-copy">Copy</span>
    </div>
    <pre class="code-block language-yaml"><code class="code-inner">Resources:
  SphApi:
    Type: AWS::Serverless::Api
    Properties:
      StageName: dev

  SphApiDeployment:
    Type: AWS::ApiGateway::Deployment
    Properties:
      RestApiId: !Ref SphApi
      Description: &quot;Deployment for dev stage&quot;

  SphApiDevStage:
    Type: AWS::ApiGateway::Stage
    Properties:
      RestApiId: !Ref SphApi
      DeploymentId: !Ref SphApiDeployment
      StageName: dev

  BasePathMapping:
    Type: AWS::ApiGateway::BasePathMapping
    DependsOn: SphApiDevStage
    Properties:
      RestApiId: !Ref SphApi
      Stage: dev
</code></pre>
</div>
<p>ë¦¬ì†ŒìŠ¤ê°€ ìƒì„±í•˜ëŠ” ë‹¨ê³„ê¹Œì§€ ë„˜ì–´ê°€ì§€ë§Œ ë°°í¬ ê²°ê³¼ëŠ” <strong>ì‹¤íŒ¨</strong></p>
<p>AWS::ApiGateway::Stageë¥¼ ìƒì„±í•˜ëŠ” ê³¼ì •ì—ì„œ <code>dev already exists in stack ...</code> ì—ëŸ¬ ë°œìƒ</p>
<ul>
<li>SphApi((AWS::Serverless::Api))ì˜ ì†ì„±ìœ¼ë¡œ StageNameì˜ ê°’ìœ¼ë¡œ ë¨¼ì € <code>dev</code> ë¼ëŠ” ìŠ¤í…Œì´ì§€ë¥¼ ìƒì„±í•˜ê³  ì´í›„ ëª…ì‹œì ìœ¼ë¡œ ì •ì˜í•œ SphApiDevStageì˜ ìŠ¤í…Œì´ì§€ ì´ë¦„ <code>dev</code>ë¥¼ ìƒì„±í•˜ëŠ” ê³¼ì •ì—ì„œ ì¶©ëŒì´ ë°œìƒí•´ ë°°í¬ ì¤‘ ì—ëŸ¬ ë°œìƒ</li>
</ul>
<p>ì´ê±¸ í•´ê²°í•˜ë ¤ë©´ AWS::Serverless::Api ì´ ë¦¬ì†ŒìŠ¤ë¥¼ ìƒì„±í•˜ì§€ ì•Šë„ë¡ í•´ì•¼í•œë‹¤. ëŒ€ì‹  ë‹¤ìŒê³¼ ê°™ì´ Api Gatewayë¥¼ ë°°í¬í•˜ê¸° ìœ„í•´ í•„ìš”í•œ ëª¨ë“  ë¦¬ì†ŒìŠ¤ë¥¼ ì§ì ‘ ìƒì„±í•´ì•¼ í•œë‹¤.</p>
<ul>
<li>AWS::ApiGateway::Resource</li>
<li>AWS::ApiGateway::Method</li>
<li>AWS::ApiGateway::Permission</li>
<li>AWS::ApiGateway::Deployment</li>
<li>AWS::ApiGateway::Stage</li>
</ul>
<p>ë”°ë¼ì„œ, DependsOn ì„ í™œìš©í•˜ëŠ” ë°©ë²•ì€ template.yamlì„ ë¶„í• í•˜ëŠ” ê²ƒë³´ë‹¤ ë¹„íš¨ìœ¨ì ì¸ ë°©ë²•ì´ ë  ìˆ˜ ìˆë‹¤.</p>
<h2 id="í•´ê²°">í•´ê²°</h2>
<p>ê²°êµ­ ë¬¸ì œë¥¼ í•´ê²°í•˜ë ¤ë©´ <a href="../sam-deploy-error---basepathmapping-create-failed/#1.%20template.yaml%20%ED%8C%8C%EC%9D%BC%EC%9D%84%20%EB%B6%84%ED%95%A0%ED%95%B4%20BasePathMapping%EC%9D%84%20%EB%B3%84%EB%8F%84%EC%9D%98%20%EC%8A%A4%ED%83%9D%EC%9C%BC%EB%A1%9C%20%EB%B0%B0%ED%8F%AC">SAM Deploy Error - BasePathMapping Create Failed</a> ë°©ë²•ì—ì„œ ë°œìƒí•œ ë¬¸ì œì¸ <code>ClassNotFoundException</code>ì„ í•´ê²°í•´ì•¼ í•œë‹¤.
â†’ <a href="../sam-deploy-error---classnotfoundexception/">SAM Deploy Error - ClassNotFoundException</a></p>

                </section>
            </article>

            <!-- ì˜¤ë¥¸ìª½ ì‚¬ì´ë“œë°”: TOC -->
            <aside class="toc-sidebar">
                <h3 class="toc-title">ON THIS PAGE</h3>
                <nav>
                    <ul class="toc-list">
                <li class="toc-item" style="margin-left: 0px">
                    <a href="#ë¬¸ì œ" class="toc-link">ë¬¸ì œ</a>
                </li>
            
                <li class="toc-item" style="margin-left: 0px">
                    <a href="#ì›ì¸" class="toc-link">ì›ì¸</a>
                </li>
            
                <li class="toc-item" style="margin-left: 0px">
                    <a href="#ì‹œë„" class="toc-link">ì‹œë„</a>
                </li>
            
                <li class="toc-item" style="margin-left: 16px">
                    <a href="#1-templateyaml-íŒŒì¼ì„-ë¶„í• í•´-basepathmappingì„-ë³„ë„ì˜-ìŠ¤íƒìœ¼ë¡œ-ë°°í¬" class="toc-link">1. template.yaml íŒŒì¼ì„ ë¶„í• í•´ BasePathMappingì„ ë³„ë„ì˜ ìŠ¤íƒìœ¼ë¡œ ë°°í¬</a>
                </li>
            
                <li class="toc-item" style="margin-left: 16px">
                    <a href="#2-dependson-ìœ¼ë¡œ-ìˆœì„œ-ê°•ì œ" class="toc-link">2. DependsOn ìœ¼ë¡œ ìˆœì„œ ê°•ì œ</a>
                </li>
            
                <li class="toc-item" style="margin-left: 0px">
                    <a href="#í•´ê²°" class="toc-link">í•´ê²°</a>
                </li>
            </ul>
                </nav>
            </aside>
        </div>
    </main>

    <script>
        const themeToggle = document.getElementById('theme-toggle');
        const themeText = themeToggle.querySelector('.text');

        function updateToggleButton(theme) {
            themeText.textContent = theme === 'dark' ? 'Switch to Light Mode' : 'Switch to Dark Mode';
        }

        updateToggleButton(document.documentElement.getAttribute('data-theme'));

        themeToggle.addEventListener('click', () => {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';

            document.documentElement.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            updateToggleButton(newTheme);

            // Toggle hljs themes
            document.getElementById('hljs-theme-light').disabled = newTheme === 'dark';
            document.getElementById('hljs-theme-dark').disabled = newTheme === 'light';
        });

        // Mobile menu toggle
        const menuToggle = document.getElementById('menu-toggle');
        const sidebar = document.getElementById('sidebar');

        menuToggle.addEventListener('click', () => {
            sidebar.classList.toggle('open');
        });

        // Close sidebar when clicking outside on mobile
        document.addEventListener('click', (e) => {
            if (window.innerWidth <= 768 &&
                !sidebar.contains(e.target) &&
                !menuToggle.contains(e.target) &&
                sidebar.classList.contains('open')) {
                sidebar.classList.remove('open');
            }
        });

        // Code Copy Implementation
        document.addEventListener('click', async (e) => {
            if (e.target.classList.contains('code-copy')) {
                const btn = e.target;
                const wrapper = btn.closest('.code-block-wrapper');
                const codeInner = wrapper.querySelector('.code-inner');

                // Collect text from each code-line to ensure correct line breaks
                const codeCells = Array.from(codeInner.querySelectorAll('.hljs-ln-code'));
                const textToCopy = codeCells.length > 0
                    ? codeCells.map(cell => cell.innerText).join('\n')
                    : codeInner.innerText;

                try {
                    await navigator.clipboard.writeText(textToCopy);

                    // Visual feedback
                    const originalText = btn.textContent;
                    btn.textContent = 'Copied!';
                    btn.classList.add('success');

                    setTimeout(() => {
                        btn.textContent = originalText;
                        btn.classList.remove('success');
                    }, 2000);
                } catch (err) {
                    console.error('Failed to copy code:', err);
                    btn.textContent = 'Error';
                }
            }
        });
    </script>
</body>

</html>